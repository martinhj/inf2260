(function(e,t,n,r){"use strict";Foundation.libs.reveal={name:"reveal",version:"4.3.2",locked:false,settings:{animation:"fadeAndPop",animationSpeed:250,closeOnBackgroundClick:true,closeOnEsc:true,dismissModalClass:"close-reveal-modal",bgClass:"reveal-modal-bg",open:function(){},opened:function(){},close:function(){},closed:function(){},bg:e(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(t,n,r){Foundation.inherit(this,"data_options delay");if(typeof n==="object"){e.extend(true,this.settings,n)}else if(typeof r!=="undefined"){e.extend(true,this.settings,r)}if(typeof n!=="string"){this.events();return this.settings.init}else{return this[n].call(this,r)}},events:function(){var t=this;e(this.scope).off(".fndtn.reveal").on("click.fndtn.reveal","[data-reveal-id]",function(n){n.preventDefault();if(!t.locked){var r=e(this),i=r.data("reveal-ajax");t.locked=true;if(typeof i==="undefined"){t.open.call(t,r)}else{var s=i===true?r.attr("href"):i;t.open.call(t,r,{url:s})}}}).on("click.fndtn.reveal touchend",this.close_targets(),function(n){n.preventDefault();if(!t.locked){var r=e.extend({},t.settings,t.data_options(e(".reveal-modal.open"))),i=e(n.target)[0]===e("."+r.bgClass)[0];if(i&&!r.closeOnBackgroundClick){return}t.locked=true;t.close.call(t,i?e(".reveal-modal.open"):e(this).closest(".reveal-modal"))}});if(e(this.scope).hasClass("reveal-modal")){e(this.scope).on("open.fndtn.reveal",this.settings.open).on("opened.fndtn.reveal",this.settings.opened).on("opened.fndtn.reveal",this.open_video).on("close.fndtn.reveal",this.settings.close).on("closed.fndtn.reveal",this.settings.closed).on("closed.fndtn.reveal",this.close_video)}else{e(this.scope).on("open.fndtn.reveal",".reveal-modal",this.settings.open).on("opened.fndtn.reveal",".reveal-modal",this.settings.opened).on("opened.fndtn.reveal",".reveal-modal",this.open_video).on("close.fndtn.reveal",".reveal-modal",this.settings.close).on("closed.fndtn.reveal",".reveal-modal",this.settings.closed).on("closed.fndtn.reveal",".reveal-modal",this.close_video)}e("body").bind("keyup.reveal",function(n){var r=e(".reveal-modal.open"),i=e.extend({},t.settings,t.data_options(r));if(n.which===27&&i.closeOnEsc){r.foundation("reveal","close")}});return true},open:function(t,n){if(t){if(typeof t.selector!=="undefined"){var r=e("#"+t.data("reveal-id"))}else{var r=e(this.scope);n=t}}else{var r=e(this.scope)}if(!r.hasClass("open")){var i=e(".reveal-modal.open");if(typeof r.data("css-top")==="undefined"){r.data("css-top",parseInt(r.css("top"),10)).data("offset",this.cache_offset(r))}r.trigger("open");if(i.length<1){this.toggle_bg()}if(typeof n==="undefined"||!n.url){this.hide(i,this.settings.css.close);this.show(r,this.settings.css.open)}else{var s=this,o=typeof n.success!=="undefined"?n.success:null;e.extend(n,{success:function(t,n,u){if(e.isFunction(o)){o(t,n,u)}r.html(t);e(r).foundation("section","reflow");s.hide(i,s.settings.css.close);s.show(r,s.settings.css.open)}});e.ajax(n)}}},close:function(t){var t=t&&t.length?t:e(this.scope),n=e(".reveal-modal.open");if(n.length>0){this.locked=true;t.trigger("close");this.toggle_bg();this.hide(n,this.settings.css.close)}},close_targets:function(){var e="."+this.settings.dismissModalClass;if(this.settings.closeOnBackgroundClick){return e+", ."+this.settings.bgClass}return e},toggle_bg:function(){if(e("."+this.settings.bgClass).length===0){this.settings.bg=e("<div />",{"class":this.settings.bgClass}).appendTo("body")}if(this.settings.bg.filter(":visible").length>0){this.hide(this.settings.bg)}else{this.show(this.settings.bg)}},show:function(n,r){if(r){if(n.parent("body").length===0){var i=n.wrap('<div style="display: none;" />').parent();n.on("closed.fndtn.reveal.wrapped",function(){n.detach().appendTo(i);n.unwrap().unbind("closed.fndtn.reveal.wrapped")});n.detach().appendTo("body")}if(/pop/i.test(this.settings.animation)){r.top=e(t).scrollTop()-n.data("offset")+"px";var s={top:e(t).scrollTop()+n.data("css-top")+"px",opacity:1};return this.delay(function(){return n.css(r).animate(s,this.settings.animationSpeed,"linear",function(){this.locked=false;n.trigger("opened")}.bind(this)).addClass("open")}.bind(this),this.settings.animationSpeed/2)}if(/fade/i.test(this.settings.animation)){var s={opacity:1};return this.delay(function(){return n.css(r).animate(s,this.settings.animationSpeed,"linear",function(){this.locked=false;n.trigger("opened")}.bind(this)).addClass("open")}.bind(this),this.settings.animationSpeed/2)}return n.css(r).show().css({opacity:1}).addClass("open").trigger("opened")}if(/fade/i.test(this.settings.animation)){return n.fadeIn(this.settings.animationSpeed/2)}return n.show()},hide:function(n,r){if(r){if(/pop/i.test(this.settings.animation)){var i={top:-e(t).scrollTop()-n.data("offset")+"px",opacity:0};return this.delay(function(){return n.animate(i,this.settings.animationSpeed,"linear",function(){this.locked=false;n.css(r).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),this.settings.animationSpeed/2)}if(/fade/i.test(this.settings.animation)){var i={opacity:0};return this.delay(function(){return n.animate(i,this.settings.animationSpeed,"linear",function(){this.locked=false;n.css(r).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),this.settings.animationSpeed/2)}return n.hide().css(r).removeClass("open").trigger("closed")}if(/fade/i.test(this.settings.animation)){return n.fadeOut(this.settings.animationSpeed/2)}return n.hide()},close_video:function(t){var n=e(this).find(".flex-video"),r=n.find("iframe");if(r.length>0){r.attr("data-src",r[0].src);r.attr("src","about:blank");n.hide()}},open_video:function(t){var n=e(this).find(".flex-video"),i=n.find("iframe");if(i.length>0){var s=i.attr("data-src");if(typeof s==="string"){i[0].src=i.attr("data-src")}else{var o=i[0].src;i[0].src=r;i[0].src=o}n.show()}},cache_offset:function(e){var t=e.show().height()+parseInt(e.css("top"),10);e.hide();return t},off:function(){e(this.scope).off(".fndtn.reveal")},reflow:function(){}}})(Foundation.zj,this,this.document)