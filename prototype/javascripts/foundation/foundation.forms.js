(function(e,t,n,r){"use strict";Foundation.libs.forms={name:"forms",version:"4.3.2",cache:{},settings:{disable_class:"no-custom",last_combo:null},init:function(t,n,r){if(typeof n==="object"){e.extend(true,this.settings,n)}if(typeof n!=="string"){if(!this.settings.init){this.events()}this.assemble();return this.settings.init}else{return this[n].call(this,r)}},assemble:function(){var t=this;e('form.custom input[type="radio"],[type="checkbox"]',e(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).each(function(e,n){t.set_custom_markup(n)}).change(function(){t.set_custom_markup(this)});e("form.custom select",e(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).not("[multiple=multiple]").each(this.append_custom_select)},events:function(){var r=this;e(this.scope).on("click.fndtn.forms","form.custom span.custom.checkbox",function(t){t.preventDefault();t.stopPropagation();r.toggle_checkbox(e(this))}).on("click.fndtn.forms","form.custom span.custom.radio",function(t){t.preventDefault();t.stopPropagation();r.toggle_radio(e(this))}).on("change.fndtn.forms","form.custom select",function(t,n){if(e(this).is('[data-customforms="disabled"]'))return;r.refresh_custom_select(e(this),n)}).on("click.fndtn.forms","form.custom label",function(t){if(e(t.target).is("label")){var n=e("#"+r.escape(e(this).attr("for"))).not('[data-customforms="disabled"]'),i,s;if(n.length!==0){if(n.attr("type")==="checkbox"){t.preventDefault();i=e(this).find("span.custom.checkbox");if(i.length===0){i=n.add(this).siblings("span.custom.checkbox").first()}r.toggle_checkbox(i)}else if(n.attr("type")==="radio"){t.preventDefault();s=e(this).find("span.custom.radio");if(s.length===0){s=n.add(this).siblings("span.custom.radio").first()}r.toggle_radio(s)}}}}).on("mousedown.fndtn.forms","form.custom div.custom.dropdown",function(){return false}).on("click.fndtn.forms","form.custom div.custom.dropdown a.current, form.custom div.custom.dropdown a.selector",function(t){var n=e(this),s=n.closest("div.custom.dropdown"),o=i(s,"select");if(!s.hasClass("open"))e(r.scope).trigger("click");t.preventDefault();if(false===o.is(":disabled")){s.toggleClass("open");if(s.hasClass("open")){e(r.scope).on("click.fndtn.forms.customdropdown",function(){s.removeClass("open");e(r.scope).off(".fndtn.forms.customdropdown")})}else{e(r.scope).on(".fndtn.forms.customdropdown")}return false}}).on("click.fndtn.forms touchend.fndtn.forms","form.custom div.custom.dropdown li",function(t){var r=e(this),s=r.closest("div.custom.dropdown"),o=i(s,"select"),u=0;t.preventDefault();t.stopPropagation();if(!e(this).hasClass("disabled")){e("div.dropdown").not(s).removeClass("open");var a=r.closest("ul").find("li.selected");a.removeClass("selected");r.addClass("selected");s.removeClass("open").find("a.current").text(r.text());r.closest("ul").find("li").each(function(e){if(r[0]===this){u=e}});o[0].selectedIndex=u;o.data("prevalue",a.html());if(typeof n.createEvent!="undefined"){var f=n.createEvent("HTMLEvents");f.initEvent("change",true,true);o[0].dispatchEvent(f)}else{o[0].fireEvent("onchange")}}});e(t).on("keydown",function(t){var r=n.activeElement,s=Foundation.libs.forms,o=e(".custom.dropdown"),u=i(o,"select"),a=e("input,select,textarea,button");if(o.length>0&&o.hasClass("open")){t.preventDefault();if(t.which===9){e(a[e(a).index(u)+1]).focus();o.removeClass("open")}if(t.which===13){o.find("li.selected").trigger("click")}if(t.which===27){o.removeClass("open")}if(t.which>=65&&t.which<=90){var f=s.go_to(o,t.which),l=o.find("li.selected");if(f){l.removeClass("selected");s.scrollTo(f.addClass("selected"),300)}}if(t.which===38){var l=o.find("li.selected"),c=l.prev(":not(.disabled)");if(c.length>0){c.parent()[0].scrollTop=c.parent().scrollTop()-s.outerHeight(c);l.removeClass("selected");c.addClass("selected")}}else if(t.which===40){var l=o.find("li.selected"),f=l.next(":not(.disabled)");if(f.length>0){f.parent()[0].scrollTop=f.parent().scrollTop()+s.outerHeight(f);l.removeClass("selected");f.addClass("selected")}}}});e(t).on("keyup",function(t){var r=n.activeElement,i=e(".custom.dropdown");if(r===i.find(".current")[0]){i.find(".selector").focus().click()}});this.settings.init=true},go_to:function(e,t){var n=e.find("li"),r=n.length;if(r>0){for(var i=0;i<r;i++){var s=n.eq(i).text().charAt(0).toLowerCase();if(s===String.fromCharCode(t).toLowerCase())return n.eq(i)}}},scrollTo:function(e,t){if(t<0)return;var n=e.parent();var r=this.outerHeight(e);var i=r*e.index()-n.scrollTop();var s=i/t*10;this.scrollToTimerCache=setTimeout(function(){if(!isNaN(parseInt(s,10))){n[0].scrollTop=n.scrollTop()+s;this.scrollTo(e,t-10)}}.bind(this),10)},set_custom_markup:function(t){var n=e(t),r=n.attr("type"),i=n.next("span.custom."+r);if(!n.parent().hasClass("switch")){n.addClass("hidden-field")}if(i.length===0){i=e('<span class="custom '+r+'"></span>').insertAfter(n)}i.toggleClass("checked",n.is(":checked"));i.toggleClass("disabled",n.is(":disabled"))},append_custom_select:function(t,n){var r=Foundation.libs.forms,i=e(n),s=i.next("div.custom.dropdown"),o=s.find("ul"),u=s.find(".current"),a=s.find(".selector"),f=i.find("option"),l=f.filter(":selected"),c=i.attr("class")?i.attr("class").split(" "):[],h=0,p="",d,v=false;if(s.length===0){var m=i.hasClass("small")?"small":i.hasClass("medium")?"medium":i.hasClass("large")?"large":i.hasClass("expand")?"expand":"";s=e('<div class="'+["custom","dropdown",m].concat(c).filter(function(e,t,n){if(e==="")return false;return n.indexOf(e)===t}).join(" ")+'"><a href="#" class="selector"></a><ul /></div>');a=s.find(".selector");o=s.find("ul");p=f.map(function(){var t=e(this).attr("class")?e(this).attr("class"):"";return"<li class='"+t+"'>"+e(this).html()+"</li>"}).get().join("");o.append(p);v=s.prepend('<a href="#" class="current">'+(l.html()||"")+"</a>").find(".current");i.after(s).addClass("hidden-field")}else{p=f.map(function(){return"<li>"+e(this).html()+"</li>"}).get().join("");o.html("").append(p)}r.assign_id(i,s);s.toggleClass("disabled",i.is(":disabled"));d=o.find("li");r.cache[s.data("id")]=d.length;f.each(function(t){if(this.selected){d.eq(t).addClass("selected");if(v){v.html(e(this).html())}}if(e(this).is(":disabled")){d.eq(t).addClass("disabled")}});if(!s.is(".small, .medium, .large, .expand")){s.addClass("open");var r=Foundation.libs.forms;r.hidden_fix.adjust(o);h=r.outerWidth(d)>h?r.outerWidth(d):h;Foundation.libs.forms.hidden_fix.reset();s.removeClass("open")}},assign_id:function(e,t){var n=[+(new Date),Foundation.random_str(5)].join("-");e.attr("data-id",n);t.attr("data-id",n)},refresh_custom_select:function(t,n){var r=this;var i=0,s=t.next(),o=t.find("option"),u=s.find("ul"),a=s.find("li");if(o.length!==this.cache[s.data("id")]||n){u.html("");var f="";o.each(function(){var t=e(this),n=t.html(),r=this.selected;f+='<li class="'+(r?" selected ":"")+(t.is(":disabled")?" disabled ":"")+'">'+n+"</li>";if(r){s.find(".current").html(n)}});u.html(f);s.removeAttr("style");u.removeAttr("style");s.find("li").each(function(){s.addClass("open");if(r.outerWidth(e(this))>i){i=r.outerWidth(e(this))}s.removeClass("open")});a=s.find("li");this.cache[s.data("id")]=a.length}},refresh_custom_selection:function(t){var n=e("option:selected",t).text();e("a.current",t.next()).text(n)},toggle_checkbox:function(e){var t=e.prev(),n=t[0];if(false===t.is(":disabled")){n.checked=n.checked?false:true;e.toggleClass("checked");t.trigger("change")}},toggle_radio:function(e){var t=e.prev(),n=t.closest("form.custom"),r=t[0];if(false===t.is(":disabled")){n.find('input[type="radio"][name="'+this.escape(t.attr("name"))+'"]').next().not(e).removeClass("checked");if(!e.hasClass("checked")){e.toggleClass("checked")}r.checked=e.hasClass("checked");t.trigger("change")}},escape:function(e){if(!e)return"";return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},hidden_fix:{tmp:[],hidden:null,adjust:function(t){var n=this;n.hidden=t.parents();n.hidden=n.hidden.add(t).filter(":hidden");n.hidden.each(function(){var t=e(this);n.tmp.push(t.attr("style"));t.css({visibility:"hidden",display:"block"})})},reset:function(){var t=this;t.hidden.each(function(n){var i=e(this),s=t.tmp[n];if(s===r)i.removeAttr("style");else i.attr("style",s)});t.tmp=[];t.hidden=null}},off:function(){e(this.scope).off(".fndtn.forms")},reflow:function(){}};var i=function(t,n){var t=t.prev();while(t.length){if(t.is(n))return t;t=t.prev()}return e()}})(Foundation.zj,this,this.document)